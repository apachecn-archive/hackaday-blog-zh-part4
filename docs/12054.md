# KiCAD 6.0:什么成功了，什么失败了

> 原文:[https://hack aday . com/2022/01/18/kicad-6-0-what-made-it-and-what-not/](https://hackaday.com/2022/01/18/kicad-6-0-what-made-it-and-what-didnt/)

我已经关注 KiCAD 的开发很多年了，并且在过去的六年左右的时间里，我每天都把它作为主要的电子 CAD 软件包，所以 KiCAD 6.0 的发布对于像我这样的电子书呆子来说是非常令人兴奋的。发布日期被推迟了一点，因为这是一个如此巨大的更新，比预期的时间要长一点。但是，它最终被贴上标签，并在圣诞节当天发行，在通常的地方进行了一些非常值得的宣传。

因此，现在是一个很好的时机来看看 KiCAD 6.0 中有哪些新特性——实际上由于一些错误修复，6.0.1 是撰写本文时的当前版本——以及哪些最初计划用于 6.0 的特性现在被推迟到 7.0 路线图及以后。

## 变化

正如大的更新经常发生的情况一样，大多数最大的变化对用户来说是不可见的，并且是重大代码重构的结果，以便为开发人员创建一致的框架，同时他们从愿望列表中添加新的功能。作为用户，我们看到的是这种幕后工作带来的变化。从用户的角度来看，一个特性的改变似乎很容易，但是需要大量的内部改变和大量的幕后开发工作。KiCAD 是一个老项目，有 30 年的代码历史，因此为未来的工作构建这些一致的框架是一项艰巨的任务。在最近与 KiCAD 开发人员[约翰·埃文斯] 的一次电子播客[访谈中，这段代码历史的负担在本文中以一种非常有用的方式进行了解释，你可以真正感受到作为一名新开发人员进行导航是多么棘手，以及为什么这次更新如此重要。](https://contextualelectronics.com/cep014-moving-to-kicad-v6-with-jon-evans/)

## 库和原理图文件

继 S-expression PCB 库格式 KiCAD 5.0 之后，符号库现在以相同的格式描述。KiCAD 6.0 只需轻触按钮即可完成迁移。这种[格式被设计成人类可读的](https://dev-docs.kicad.org/en/file-formats/sexpr-schematic/)，这反过来使得编写创建或修改这些文件的其他软件更加容易。

一个有用的变化是不再依赖原理图库，所以一旦图纸完成，你只需要打开图纸文件。不再有破损的原理图！不再为少数符号而追逐库，设计重用也大大简化了。

当然，这些更改也有不利的一面——一旦您从 KiCAD 5.x 中打开并移植了一个项目，就无法返回，所以请确保您首先制作了一个副本和/或使用了版本控制。也就是说，到目前为止，我还没有遇到迫使我回到以前版本的问题。

## 新功能

[![](../Images/f476c1873dcc5d7ab6de031be74a16c0.png)](https://hackaday.com/wp-content/uploads/2022/01/pcb_hatched_and_rounded.png)

Curvy hashed goodness. In all seriousness, this is great news for flex PCB design

更新的或新的特性列表是如此的广泛，以至于在这里简单地列出它们将会是一个相当长的任务。幸运的是，我不需要这么做，因为[Peter Dalmaris]在今年年初发布了 6.0 版本的变化预览，当时大多数新功能和变化都已经推出了测试版。对我来说，第一个亮点是对设计规则检查(DRC)系统的重大更新，现在它的功能和可配置性明显更强，甚至允许每个电路板定制规则。这个特性有自己特殊的规范语法，需要一些时间来学习，但是看起来花的时间是值得的。另一个显著改进的区域是“可见性控制”侧面板，它简化了对可见元素的控制，有助于在层间工作时产生整洁的显示。

弧形痕迹看起来很棒。请在评论中自由讨论它们的效用。(也许在微波射频设计中？)散列区域填充非常适合我们这些设计柔性电路的人，或者出于散热原因需要铜光的平面。当我们谈论区域填充时，现在有一个配置选项允许在区域轮廓之外的角落进行圆角化，这使得圆角化区域看起来更好。

对于 KiCAD 6.0 来说，有一个特性可能并不新鲜，但我之前并没有注意到，那就是拖动选择。当在一堆对象周围单击拖动以进行分组选择时，结果证明该工具是方向敏感的。从左向右拖移只会选择完全包含在框中的项目，而相反，从右向左拖移会选择框接触的任何项目，即使是部分接触。我真希望几年前就发现了这一点！感谢 Twitter 上的[Stargirl @thevalkyrie]对此事的提醒。

其他大的改进是统一的项目设置，有更多的选项来设置 PCB 属性，如堆叠，最后，在原理图层面的净类定义具有可定制的颜色和风格，以提高设计意图的清晰度。最后，有一个新的“规则文件”导入功能，用于 PCB fab 定义和约束，这将有望在不同制造商流程之间移动时更容易地设置电路板约束，并减少根据错误的规则集设计紧密电路板这一恼人问题的可能性。(我自己从来没有这样做过，哦，没有。)

PCB 编辑器有如此多的更新和设计改进，这里没有足够的空间来做它公正。我建议改为阅读[发行说明](https://www.kicad.org/blog/2021/12/KiCad-6.0.0-Release/)！简而言之，工作流程得到了简化，工具得到了扩展和重组，变得更加可见，KiCAD 的一些粗糙的边缘和其他奇怪的地方被平滑掉了。

## 新的插件和内容管理器

[![](../Images/a146ea6ab54da7d8b0022877776ca5fa.png)T2】](https://hackaday.com/wp-content/uploads/2022/01/pcm-demo.gif)

一个非常好的特性在最后一刻偷偷溜进了 6.0 版本，那就是新的[插件和内容管理器](https://www.kicad.org/blog/2021/12/Development-Highlight-Third-Party-Content-Improvements/)的第一个版本。这极大地改善了添加插件的用户体验，KiCAD 项目维护着它自己的在线存储库，并且新的插件不断出现。

这种集成管理将使社区贡献的主题、库和软件扩展更加清晰可见，并将标志着 KiCAD 定制化的新时代。在撰写本文时，值得注意的插件包括我广泛使用的优秀的 [InteractiveHtmlBom](https://github.com/openscopeproject/InteractiveHtmlBom) 、满足您奇特标签需求的 [KiBuzzard](https://github.com/gregdavill/KiBuzzard) ，以及用于面板任务的 [KiKit](https://github.com/yaqwsx/KiKit) 。

这个库还处于早期阶段，但是新的组件库已经在那里出现了。然而，这并不完全是一个按钮。如果一个 Python 插件复杂到依赖非默认安装的模块，那么你需要手动调用 Python 包管理器`pip`来满足这些依赖。幸运的是，至少在 windows 上，有一个特殊的命令解释器菜单项，正确设置了所有 Python 路径，所以打开一个终端，调用`pip`，然后继续您的项目是一件小事。需要手动干预的 Python 插件应该在第一次安装时用指令提示您。希望软件包管理器的未来版本会自动处理这些问题！最后，在真正的开源风格中，添加额外的库是非常容易的，所以如果你或你的组织有其他需求，你可以从官方版本中断开。

## 推迟到 7.0

KiCAD 6.0 的愿望清单真的很大而且雄心勃勃，为了更快地获得值得使用的东西，去年年初实施了一项功能冻结，以完成那些削减的功能并消除错误。许多真正好的功能没有取得足够的进展，或者在工作开始之前依赖于其他变化。不管怎样，让我们看看下一个版本中计划的一些新技巧。

首先，Python API 将会改变。当前不支持对逻辑示意图对象的 API 访问，因此无法创建操作逻辑示意图的插件。在 7.0 版中，这种情况会有所改变，但要等到基础逻辑示意图对象被重构后才能启用。有一个计划的对象属性/自省 API，它允许创建一个新的插件类，用于更强大的设计操作。手指交叉！

下一个重要特性同样与原理图编辑器有关。将实现正交线拖动，以允许移动符号并保持连接良好。网络领带！我们将最终获得适当的网络连接支持！

PCB 编辑器计划获得 teardrop 支持，以及像 trace refining 这样的现代特性。还计划了调整走线长度匹配/弯曲的能力。对布局片段的支持将促进设计重用，对焊盘堆栈和更强大的散热控制也将有更好的支持。

最后也是最有趣的未来功能——至少对我来说——是计划中的 PCB 约束管理系统。这是为了允许在原理图中指定约束，并将其传递到电路板编辑器中，以便约束放置和布局，并输入到 DRC 系统中。这将是一个史诗般的特征，如果它真的发生了。目前细节还不多，但请放心，我会继续追踪。

这就是我们现在的情况，以及我们在 KiCAD 世界中的发展方向。请密切关注关于这个神奇工具的未来故事和指南，因为 KiCAD 的未来是光明的，而且它都是开源的，因此免于许可费用。

需要一些帮助最终决定搬到 KiCAD 吗？然后你会想去查看官方的 KiCAD 论坛，时不时地去超级活跃的 T2 KiCAD Discord 论坛看看。