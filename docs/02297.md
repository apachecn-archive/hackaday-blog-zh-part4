# 僵尸网络来敲门时该怎么办

> 原文:[https://hack aday . com/2019/03/21/僵尸网络来敲门时该做什么/](https://hackaday.com/2019/03/21/what-to-do-when-the-botnet-comes-knocking/)

“这是一个寒冷多风的夜晚，但不祥的微风吹过网络更冷。常规的涓涓细流的登录尝试突然变成了 IP 地址的洪流，所有的 IP 地址都试图闯入我托管的 Joomla 站点的后端。我又倒了一杯咖啡，这将是一个漫长的夜晚。"

撇开黑色科技不谈，有些奇怪的事情正在发生。每次登录失败，我都会从那个网站收到一封电子邮件。偶尔的登录尝试并不奇怪，但这是每分钟多次尝试，都来自不同的 IP 地址。看着日志，我感觉他们正在从各种数据库转储中抽取用户名和密码，很可能还在我的域名上随机植入了 Whois 数据库中的信息。

## 谁睡着了

说到这里，“Whois”是一个有用的工具，可以找到关于域名或 IP 地址的信息。这是一个包含负责 IP 或域名的公司以及联系信息的数字目录。我选择了几个攻击 IP 地址并运行查找。这些 IP 来自 Digital Ocean(一家虚拟服务器托管公司)、谷歌云服务、泰国的一家 ISP 等。许多地址似乎属于服务器。在网络浏览器中调出几个 IP 地址，似乎可以确认它主要是 Linux 机器。唯一合理的解释是，这个网站已经落入了运行在受损的 Linux 服务器上的僵尸网络的网站。

僵尸网络有两种一般的操作模式。最明显的模式是当他们攻击一个网站或服务使其离线。这通常是拒绝服务(DoS)攻击，意在耗尽带宽或其他计算机资源。有像 Cloudflare 这样的公司，他们围绕着阻止这种攻击的目标而建立。另一种操作模式是传播——感染更多的计算机。许多僵尸网络本质上是病毒，利用现有的僵尸网络试图危害其他机器。我相信这就是我所看到的。

[![](../Images/48b022368f164507201171fd5a1bc575.png)](https://hackaday.com/wp-content/uploads/2019/03/installing-ubuntu-updates.png)

Friendly reminder: Support for 14.04 LTS ends in a week.

那么如何走出十字线，避免我的盒子被破解呢？首先，如果你等到受到攻击时才考虑安全问题，那就已经太晚了。一些基本的卫生需要很长时间——保持你的操作系统最新，保持 Joomla/WordPress/etc 最新，保持任何插件或扩展更新。几乎不到一周，下一个漏洞就被发现了，运行旧软件会让你的服务器变得易受攻击。

禁用默认的“admin”帐户会有很大的不同。针对管理员帐户运行公共密码列表可以很快完成。大多数框架都允许重命名或替换内置的管理员帐户。如果您允许 SSH 登录，可以禁用 root 登录。尽量让攻击者的日子不好过，不要留下明显的用户名被攻击。

## 终止问题

我已经尽了最大努力来遵循上面的指导方针，所以我并不太担心受到影响。通知电子邮件的泛滥仍然是一件痛苦的事情，而且攻击者总是有极小的机会通过登录猜测或有针对性的钓鱼电子邮件获得好运。我选择了一种核心选项:使用 web 服务器的配置来限制对管理界面的访问。在 Apache 中，在该网站的“VirtualHost”小节中，我添加了一个指向管理界面的“Directory”语句。在那个部分，一个`Require ip`声明允许我阻止任何人试图登录网站的管理门户。

这里工作的模块是“mod_authz_host ”,它也需要一个网络/网络掩码。如果你没有静态 IP，另一个选择是 VPN。如果您使用 10.0.1.x 地址，该语句将类似于`Require ip 10.0.1.0/24`，确保您的受保护接口仅对 VPN 客户端可用。

发现自己成为僵尸网络的目标从来都不是一件愉快的事情，但是至少可以采取一些措施来解决这个问题，尤其是当它像猜测 Joomla 网站的管理员密码一样简单的时候。