# 让你的 Raspberry Pi SD 卡休息一下:日志到 RAM

> 原文:[https://hack aday . com/2019/04/08/give-your-raspberry-pi-SD-card-a-break-log-to-ram/](https://hackaday.com/2019/04/08/give-your-raspberry-pi-sd-card-a-break-log-to-ram/)

SD 卡的脆弱性是树莓派生态系统中的薄弱环节。我们大多数人似乎都至少有一个私家侦探藏在某个地方，管理着一面魔镜，驾驶着安全摄像机，甚至管理着一个媒体库。但是有可能 Pi 正在写很多很多的日志文件。记录是好的——它有助于跟踪问题——但是不受控制的记录可能会导致 Pi 的 SD 卡出现问题。

[Erich Styger]有一个巧妙的方法来避免在 Raspberry Pi 上的 SD 卡日志问题，他称之为减少 SD 卡“抖动”的解决方案。问题是闪存段在相当少的擦除周期后会磨损，SD 卡的磨损平衡算法最终会封锁足够多的卡，导致文件系统问题。他的“Log2Ram”是一个简单的 Unix shell 脚本，它设置了一个挂载点，用于在 Ram 中而不是在 SD 卡上登录。

这个想法是，任何发送日志条目到/var/log 的应用程序或服务实际上将它们写入虚拟日志文件，这不会在 SD 卡上累积任何活动。cron 作业每小时都会将虚拟日志清理到 SD 卡中，大大减少了 sd 卡的磨损。在日志数据被扫描到磁盘之前，仍然有可能丢失日志数据，但是如果您有一个相对稳定的系统，那么对于一个看不见、想不到的 Pi 的长期健康来说，这是一个很小的代价。

我们非常喜欢[Erich]项目的一点是，它是 shell 脚本和 Linux 管理概念的一个很好的例子。如果你需要更多关于这些东西的信息，请查阅[Al Williams 的] Linux-Fu 系列。这要追溯到很久以前了，所以请尽情阅读吧。