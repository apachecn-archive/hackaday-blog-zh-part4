# 本周安全:M1RACLES，完整的半双，补丁差距

> 原文:[https://hack aday . com/2021/05/28/this-week-in-security-m1 racles-the-full-half-double-and-patch-gap/](https://hackaday.com/2021/05/28/this-week-in-security-m1racles-the-full-half-double-and-patch-gaps/)

我们偶尔会取笑新的安全漏洞，它们有一个吸引人的名字和闪亮的网站。不过，我们在这里开辟了一个新的领域，报道了一个闪亮的、自我调侃的网站。首先，这是苹果全新 M1 芯片的一个真正的漏洞。它有 CVE-2021-30747，在一些非常有限的情况下，它可能被用于一些恶意的东西。全称是[m1 缺失寄存器访问控制泄漏 EL0 状态](https://m1racles.com/)，或 M1RACLES。为了将这个难以理解的名字翻译成英文，CPU 寄存器对来自非特权用户空间的读/写访问保持开放。它恰好是一个两位寄存器，没有记录用途，因此非常适合在进程间传输数据。

[![](../Images/7975419948eaeab6ee1d1fc79c95e403.png)](https://hackaday.com/wp-content/uploads/2021/05/logo.png) 注意，这是一份无证登记簿。如果事实证明它确实做了一些重要的事情，这个漏洞可能会很快变得更加严重。在此之前，将其视为一个二位漏洞似乎是准确的。然而，就目前而言，我们最担心的是两个进程可以利用这一点来来回回地传递信息。这不像 Spectre 或 Rowhammer，其中一个进程正在读取或写入一个不相关的进程，但这两个进程都必须参与游戏。

发现者[Hector Martin]指出了一个实际上可能被滥用的例子:绕过 iOS 设备上的权限。这是一个巧妙的场景。第三方键盘总是有点令人担忧，因为它们运行的代码可以看到你输入的一切，包括密码。长期以来的建议是永远不要使用这样的键盘，如果它要求网络访问权限的话。苹果已经把这个建议变成了一个平台规则——没有 iOS 键盘可以接入网络。如果一台设备安装了第二个恶意应用程序，并且该应用程序具有互联网访问权限，该怎么办？通过一个隐蔽的数据通道，键盘可以将击键转移到它的姐妹应用程序，并从设备中获取你的秘密。

那么你应该有多关心 CVE-2021-30747 呢？可能不多。这个闪亮的网站实际上是一个社会实验，看看我们中有多少人会写下这个漏洞，而不是开玩笑。为什么要这么麻烦呢？显然，制作这个视频完全是一个借口，以适当的坏苹果为特色！！音乐视频。

## 半压在罗哈默身上

前几天，[谷歌公布了半双](https://security.googleblog.com/2021/05/introducing-half-double-new-hammering.html)的细节，杯子里绝对是满满的半双，满满的都是想到的傻傻的双关语。这个概念很简单:如果 Rowhammer 工作是因为 ram 的单个行在物理上靠得很近，那么进一步的小型化是否能够攻击两行之外的位？答案是[一个合格的是](https://github.com/google/hammer-kit/blob/main/20210525_half_double.pdf)。

快速复习一下，Rowhammer 是 2014 年首次针对 DDR3 演示的攻击，快速访问一行内存会导致相邻行的位翻转错误。自那以后，芯片制造商一直在努力加强对 Rowhammer 的防范，包括检测技术。与此同时，研究人员通过双面 Rowhammer、随机读取顺序以及试图使攻击与 ram 刷新间隔同步等技术不断推进这项技术。半加倍是克服现代 ram 芯片内置保护的另一种方式。

我们首先指定一个特定的 ram 行作为受害者(V)。紧挨着它的行将是近侵略者行(N ),下一行称为远侵略者行(F)。正常的行锤攻击会简单地在从近攻击者和远诱饵读取之间交替，快速切换行选择线，这降低了相邻位中的物理电荷。取而代之，半双攻击在远攻击者和诱饵行之间交替 1000 个周期，然后从近攻击者读取一次。重复这个过程，直到牺牲行发生位翻转，这通常发生在几十次迭代中。因为锤击不在受害者行的旁边，所以内置检测将缓解措施应用于错误的行，从而允许攻击成功，尽管采取了缓解措施。

## 更易受攻击的 Windows 服务器

两周前，我们谈到了 CVE-2021-31166，这是 Windows 驱动程序中的一个蠕虫漏洞。[吉姆·德弗里斯]一听说 CVE 就开始想知道一些事情。在端口 5985 上运行的 Windows 远程管理也容易受到攻击吗？似乎没有人知道，所以他亲自动手，并证实，是的，WinRM 也容易受到这一缺陷。据我所知，这是默认安装和启用在每一个现代 Windows 服务器上。

> 我终于有时间回答我自己的问题了。WinRM *易受攻击。这确实增加了易受攻击系统的数量，尽管没有人会有意将该服务放到互联网上。
> 
> -吉姆·德瑞(吉姆·德瑞)[5 月 19 日，2021 年](https://twitter.com/JimDinMN/status/1395071966487269376?ref_src=twsrc%5Etfw)