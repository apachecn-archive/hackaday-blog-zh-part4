# 本周的安全:审查研究人员，OpenPGP 之死，取消引用空值，Zoom 正在观察你

> 原文：<https://hackaday.com/2019/07/12/this-week-in-security-censoring-researchers-the-death-of-openpgp-dereferencing-nulls-and-zoom-is-watching-you/>

上周，我们每周安全专栏的时间安排与独立日假期相冲突。好的一面是，我们本周买一送一，因为我们要报道两周的新闻，而且有很多内容要报道！

保加利亚的一名安全研究员[上周](https://www.zdnet.com/article/bulgarian-it-expert-arrested-after-demoing-vulnerability-in-kindergarten-software/)因展示他在当地政府网站上发现的一个弱点而被捕。在演示视频中，他表示他试图向软件供应商和当地政府披露该漏洞。当他的警告被忽视后，他前往脸书向世界通报了这个问题。

从视频中可以看出，验证步骤是在浏览器端执行的，很容易被最终用户操作。一旦发现这样的缺陷，从易受攻击的站点自动抓取数据的过程就变得微不足道了。发现的漏洞并不特别有趣，尽管暴露的数据量相当令人担忧。更大的故事是，截至最新报道，当地政府仍打算起诉[佩特科]下载数据作为演示攻击的一部分。

### Youtube 审查

[![We made a video about launching fireworks over Wi-Fi for the 4th of July only to find out @YouTube gave us a strike because we teach about hacking, so we can't upload it. YouTube now bans: "Instructional hacking and phishing: Showing users how to bypass secure computer systems"](img/eee098cf028d7543548317c53b58f772.png)](https://twitter.com/KodyKinzie/status/1146196570083192832)

在相关新闻中，谷歌已经开始打击“指导性黑客攻击和网络钓鱼”视频。[Kody]来自 Null Byte Youtube 频道，在收到一个讨论 Wifi 漏洞的视频的罢工后，发现自己被锁定在自己的频道之外。

解禁视频的关键似乎是引起大量社交媒体的关注。足够的抗议似乎会引发对相关视频的人工审查，通常会导致罢工被取消。

### 改进型拉链炸弹

zip 炸弹是一个很小的 zip 文件，解压成一个大得离谱的文件或文件集合。虽然这种文件有明显的邪恶用途，但它也成为一种竞争，制作最极端的 zip 炸弹。之前的冠军是 42.zip，这是一个递归的 zip 文件，完全解压缩后，重达 42pb。一个新的竞争者可能[刚刚摘得桂冠](https://www.bamsoftware.com/hacks/zipbomb/)，并且没有使用 zip 文件递归。

[大卫·费菲尔德]发现了一对拉链戏法。首先，可以从压缩数据的单个“内核”构建多个文件。第二，文件头也可以是要解压缩的文件的一部分。这是一项聪明的工作，当看着他放在一起的图形时，更容易理解。从这两点出发，剩下的唯一任务就是优化。利用 zip64 格式，最终压缩比约为 9800 万比 1。

### 中断 OpenPGP 密钥服务器

众所周知，OpenPGP 正濒临破产。OpenPGP 是一种允许通过加密签名对电子邮件进行加密和验证的技术。它是现代安全通信的鼻祖，至今仍被广泛使用。OpenPGP 的一个特性是任何人都可以将自己的公钥上传到托管在世界各地的 keyservers 上。由于 90 年代早期首次开发 OpenPGP 时的政治气候，人们决定 keyserver 的一个固有特性是上传的密钥永远不会被删除。

OpenPGP 密钥的另一个特性是，一个用户可以使用他们的密钥来签署另一个用户的密钥，正式证明它是有效的。这就形成了所谓的“信任之网”。当 OpenPGP 实例验证签名时，它也会验证附加到该签名的所有证明。有人滥发了一对 OpenPGP 证书，上面有上万个签名。如果您的 OpenPGP 客户端刷新这些签名，并试图检查验证，它将在负载下陷入停顿。加载更新的证书会永久破坏离线密钥库。在某些情况下，只能删除单个证书，但有些用户不得不删除整个密钥库。

很明显，OpenPGP 基础设施的某些部分已经很久没有得到很好的维护了。[Robert J. Hansen]一直是公众对这次攻击反应的先锋，更不用说一个直接成为目标的用户了。在[的一篇后续文章](https://gist.github.com/rjhansen/f716c3ff4a7068b50f2d8896e54e4b7e)中，他提到需要重写 OpenPGP 的 keyserver 组件，并且缺少这样做的资源。

目前还不清楚 OpenPGP 基础设施会变成什么样。很可能旧的密钥服务器网络将不得不被完全抛弃。在 keys.openpgp.org 有一个实验性的密钥服务器，可以移除垃圾签名。

### 小心二维码

链接缩写是一种避免键入长 URL 的有用方法，但也有一个缺点——你事先不知道你要去哪个 URL。值得庆幸的是，有一些链接缩写，比如 [unshorten.it](https://unshorten.it/) 。粘贴一个短链接，获得完整的网址，这样你就不会因为点击了一个短链接而不小心访问了一个可疑的网站。cofense.com[的【尼克·瓜里诺】提出了一个新的警告](https://cofense.com/radar-phishing-using-qr-codes-evade-url-analysis/):二维码同样会导致恶意或可疑的网站，并且在扫描前不太容易检查。他的重点主要是如何使用二维码绕过安全产品，以发起钓鱼攻击。

大多数 QR 扫描仪都有一个自动导航到代码中的网页的选项。关闭此选项。扫描二维码不仅会导致恶意网站，而且 URL 还会在其他应用程序中启动操作。二维码的这一潜在问题与缩短链接的问题非常相似——在与它交互之前，实际的有效载荷是不可读的，当它可能为时已晚。

### 为了乐趣和利益去引用指针

10 日，Eset 博客[welivesecurity]，[报道了一个 Windows 本地权限升级 0 天](https://www.welivesecurity.com/2019/07/10/windows-zero-day-cve-2019-1132-exploit/)正在被积极利用。该漏洞突出了几个概念，其中一个我们以前没有涉及过，即如何在漏洞中使用空指针解引用。

在 C 语言中，指针只是一个保存内存位置的变量。在那个内存位置可以是一个数据结构，一个字符串，甚至是一个可调用的函数。按照惯例，当指针不指向任何东西时，它们被设置为 NULL。这是一种快速检查指针是否指向实时数据的有用方法。与指针数据交互的过程被称为解引用指针。空指针解引用则是访问由设置为空的指针所引用的数据。这将我们置于未定义行为的危险境地。

不同的编译器、架构甚至操作系统在做一些未定义的事情时，可能会表现出不同的行为。对于 32 位 Windows 7 上的 C 代码，NULL 与零是无法区分的，内存位置零是完全有效的位置。在这种情况下，我们谈论的不是物理位置零，而是逻辑地址零。在现代系统中，每个进程都有一个专用的内存池，操作系统管理偏移量和内存映射，允许进程使用更简单的逻辑内存寻址。

Windows 7 有一个函数“NtAllocateVirtualMemory”，允许一个进程请求访问任意内存位置。如果向该函数传递一个空值或零作为内存位置，操作系统只需选择一个位置来分配该内存。许多人认为的错误是，这个函数将有效地向下舍入小内存位置。很有可能在逻辑地址 0/NULL 分配内存，但这被认为是不好的行为。这里重要的一点是，在 Windows 7 中，程序可以在空指针所指向的位置分配内存。

抓住漏洞！恶意程序设置弹出菜单和子菜单作为其 GUI 的一部分。当该菜单仍在初始化时，恶意程序取消设置菜单的请求。通过精确地计时取消请求，仍然可以创建子菜单，但是是一个空指针而不是预期的对象。然后，第二个进程可以触发系统进程来调用预期是对象的一部分的函数。因为 Windows 允许分配内存零页，这实际上将系统级执行交给了攻击者。完整的报道值得花时间去看看。

### 放大你的弱点

Zoom 是一个流行的网络会议应用程序，面向公司，其主要卖点是加入会议非常容易。显然，他们在简单的会议加入方面做得有点太努力了，因为在 Mac 上加载恶意网页会导致自动加入会议,只要该机器以前连接过 Zoom 会议。你可能会认为卸载 Zoom 客户端就足够了，但是安装 Zoom 也会安装一个本地 web 服务器。令人惊讶的是，卸载 Zoom 并不会删除 web 服务器，但它被设计为永久监听新的 Zoom 会议尝试。如果这听起来像特洛伊木马，你没有错。

对 Zoom 官方回应的强烈抗议足以让他们意识到自己方式的错误。他们推出了一个更新，删除了隐藏的服务器，并在加入会议之前添加了一个用户交互。此外，[苹果推出了一个更新](https://techcrunch.com/2019/07/10/apple-silent-update-zoom-app/),删除隐藏的服务器(如果存在的话),并在加入缩放会议之前进行提示。

### 无线键盘让你失望

您是否曾经使用无线键盘输入密码，并怀疑您是否将密码以明文形式广播给了所有正在收听的人？理论上，无线键盘和鼠标使用加密来防止窃听，但至少[罗技设备在其加密方案中有许多问题](https://www.heise.de/ct/artikel/Logitech-keyboards-and-mice-vulnerable-to-extensive-cyber-attacks-4464533.html)。

部分问题似乎是罗技的“统一”无线系统，以及对兼容性的强调。一个接收器可以支持多个设备，这有助于消除电缆混乱，但也会削弱加密方案。攻击者只需能够在配对期间监控无线电信号，甚至在观察按键的同时监控信号。无论哪种方式，只需几分钟的处理时间，攻击者就可以对无线设备进行读写访问。

在过去的几年中，固件更新已经修复了几个更严重的问题，但是研究人员马库斯·门斯发现，新购买的硬件仍然不包含更新的固件。更糟糕的是，一些受影响的设备没有官方支持的固件更新工具。

毕竟，也许有线外设才是出路！