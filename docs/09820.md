# 车库门控制器获得物联网待遇

> 原文：<https://hackaday.com/2021/04/13/garage-door-controller-gets-the-iot-treatment/>

[TheStaticTurtle]为他的车库门建造了一个定制控制器。他想保留原来的物理按钮和射频遥控接口，同时添加一个更现代的无线控制，可从他的互联网连接设备访问。升级旧系统通常是一个反复试验的复杂过程，他不得不放弃几个没有按计划运行的原型版本。但幸运的是，第三次是魅力所在。

最初的关门逻辑非常简单。按一个按钮，门就开了。如果它不在所需的方向上，再次按下按钮停止电机，然后第三次按下它反转方向。借助用户手册图表和一点逆向工程，他能够掌握如何规划他的附加控制器与旧系统的接口。

如今，当你想将物联网添加到一个项目中时，有许多微控制器可供选择，但[TheStaticTurtle]决定使用老忠实 ESP8266 作为他的新控制器的大脑。为了让他的附加板工作，他需要检测电机转动的方向，并在门到达任一方向的行程终点时检测限位开关。最后，他需要一个与激活按钮并联的继电器触点来远程发送命令。

为了检测电机是在“打开”还是“关闭”的方向上移动，他使用了一对背对背的光电耦合器与电机端子并联。他将另一对光电耦合器连接到两个末端限位开关上，当门完全打开或关闭时，开关会显示，并关闭电机电源。最后，来自 ESP8266 的 GPIO 驱动继电器发送开门和关门命令。电路板是在 EasyEDA 设计的，从中国回来后，他很快就能组装、测试和调试他的电路板。

代码是使用 Arduino IDE 编写的，它将 ESP8266 连接到在他的家庭自动化计算机上运行的 MQTT 服务器。最终结果是一个漂亮的仪表板，有三个图标，分别代表打开、关闭和停止，可以从连接到他家庭网络的所有设备上访问。一个 3D 打印的外壳附着在原来的控制箱外面，以保持整洁。使用热熔胶作为状态 LED 的光导管是一个非常漂亮的技巧。如果你有兴趣更深入地了解这个项目，[the staticurtle]已经将所有资源发布在他的[Github 库](https://github.com/TheStaticTurtle/GarageDoorController)上。