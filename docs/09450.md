# AVR 可配置定制逻辑作为 4 倍芯片时钟速度的分频器

> 原文:[https://hack aday . com/2021/03/08/AVR-configurable-custom-logic-as-a-frequency-divider-at-4x-chips-clock-speed/](https://hackaday.com/2021/03/08/avr-configurable-custom-logic-as-a-frequency-divider-at-4x-chips-clock-speed/)

当你能找到带有可编程(ish)逻辑的廉价微控制器，可以独立于系统时钟运行时，这是多么美好的时光啊。[戴维·约翰逊-戴维斯]最近使用一些较新的 AVR 微控制器设计中提供的可配置定制逻辑(CCL)构建了一个概念验证。这是一个简单的实现，[一组分频器，在高达 90 MHz 的输入信号下使三个 led 闪烁](http://www.technoblogy.com/show?3HWB)。但是这种简单性是喜欢他的文章的原因——你可以马上理解它。

![](../Images/859c9d58900e9422721d864ab2fc1884.png)

有四个查找表(lut)用于形成分频器。把这些想象成与非门或异或门，但是你要决定输出真值表将如何执行。输出馈入序列器，该序列器可以配置为 D/JK 触发器或 D/RS 锁存器，此外，您可以指定信号边沿，当然也可以定义时钟源。这里有一个有趣的技巧，就是通过将两个 D 触发器的 lut 设置为全 1 来保持它们的 G 输入为高电平。请注意，第一个分频器(PA3)的输出馈入第二个分频器的外部输入(PD2)。

虽然 CCL 是使用闪存到微控制器的 C 代码配置的，但它是一个硬件外设，能够独立于芯片的系统时钟运行。这里使用的 AVR128DA28 的最高频率为 24 MHz(如果使用 PLL，则为该频率的两倍)，但[David]通过时钟分频器向输入引脚馈送高达 90 MHz 的信号，获得了可靠的结果。当然，您可以选择向 CCL 提供内部时钟信号，但这在这里似乎并不那么有趣。在演示中，[David]实际上是切换一个 IO 引脚，该引脚连接到 PA2 作为逻辑的外部输入。请确保您点击了上面链接的他的文章，因为他在浏览示例代码方面做得非常出色(只需几十行就可以完成所有设置)。这里是这个芯片的数据表(PDF，第 447 页相关的寄存器)和更深入的研究(T2)CCL 上的应用笔记(T3)。

那么这一切有什么用呢？我们已经在一月份看到了这个问题的答案，当时 [[SM6VFZ]使用 CCL 外设构建了一个软件定义的开关模式转换器](https://hackaday.com/2021/01/09/avr-microcontroller-doubles-up-as-a-switching-regulator/)。多棒啊。