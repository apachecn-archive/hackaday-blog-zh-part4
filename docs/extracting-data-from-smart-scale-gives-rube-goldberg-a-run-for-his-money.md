# 从 Smart Scale 中提取数据让 Rube Goldberg 物有所值

> 原文：<https://hackaday.com/2021/10/31/extracting-data-from-smart-scale-gives-rube-goldberg-a-run-for-his-money/>

[Kevin Norman]为自己买了一台智能体重秤，打算记录数据供自己分析，但发现从设备中提取数据绝非易事。事实证明，从他的秤中获取数据的唯一方法是在移动应用程序中查看。屏幕抓取是一种由来已久的从不合作的系统中提取数据的方法，所以[Kevin]承诺定期从应用程序中获取完整的屏幕截图，并使用光学字符识别(OCR)来获取数字，但实现这一点是一个令人惊讶的漫长过程，充满了死胡同。

首先，虽然 OCR 是可靠的，但它需要合适的条件。最终成为大问题的一件事是该应用程序在数字后附加单位(千克，%)的方式。他们不仅挤得很近，而且大约是这些数字本身高度的一半。事实证明，混合和匹配字符高度，除了让它们相互贴紧之外，还会给 OCR 带来可靠性问题。

这个特殊问题的解决方案来自一个意想不到的角度。[凯文]正在使用一个叫做宇宙魔方的开源 OCR 程序[，并在用尽自己的选择后加入了一个 IRC 社区`#tesseract`寻求建议。困惑的在线社区成员告诉[Kevin]他们与 OCR 无关；`#tesseract`实际上是一个开源 3D FPS 射击游戏](https://github.com/tesseract-ocr/tesseract)[的社区，同名游戏](http://tesseract.gg/)。但幸运的是，其中一名成员实际上有 OCR 经验，并提出了获胜的方法:用 [OpenCV](https://opencv.org/) 预处理图像，使用`cv2.findContours()`检测并创建每个元素周围的边界框。如果一个元素比小数点高，但比其他元素都短，就把它扔掉。完成之后，还需要做一些调整，但是终点线终于在眼前了。

现在[Kevin]可以在早上使用体重秤，拍一张截图，不到半分钟，结果就被导入数据库，并生成可视化效果。由此产生的工作流程可能看起来像是鲁布·戈德堡会赞同的东西，但它确实有效！