# 浏览器中的 Linux 和 C

> 原文:[https://hackaday.com/2022/05/28/linux-and-c-in-the-browser/](https://hackaday.com/2022/05/28/linux-and-c-in-the-browser/)

曾经有一段时间，试图学习编写低级驱动程序或内核代码是很难的。你真的需要两台机器:一台用来工作，一台用来一遍又一遍地出错，直到你做对为止。如今，每当你完全搞砸了，你就可以启动一个虚拟机并回滚它。容易多了！我们认为这并不实用，但是[nsommer]有一篇关于加载 C 编译器和为虚拟机编译 Linux 的有趣文章。有什么不同？哦，[虚拟机在你的浏览器](https://ja.nsommer.dk/articles/linux-and-tiny-c-compiler-in-the-browser-part-one.html)里。

v86 CPU 仿真器在浏览器中运行，看起来像一台带有常用硬件的奔腾 III 计算机。您可能认为它很慢，肯定不会像火箭一样快，但它确实将机器代码翻译成 WebAssembly，所以性能没有您想象的那么差。

这篇文章详细介绍了如何构建和创建一个托管 v86 的简单机器网页。一旦你交叉编译了内核，你就可以虚拟地启动机器了。另一个有趣的部分是添加了`tcc`，它是一个非常强大的 C 编译器，比非常传统的`gcc`小得多，也快得多。

`tcc`构建很棘手，因为正常的构建过程会编译编译器，然后使用相同的编译器来构建默认库。当交叉编译时，这样做效果不好，因为您希望宿主编译的库与您希望第二次编译的库不同。你会在文章中看到如何解决这个问题。这篇文章继续展示如何进行远程调试，甚至将 QEMU 融入其中。v86 内部调试到目前为止好像都不行。有更多关于这个话题的帖子承诺。

老实说，这就像教小鸡玩跳棋一样。可以做到，没什么实用价值，但还是有看头的。另一方面，如果你花了一个周末的时间研究这个，那么相比之下，你的下一个 Linux 移植项目应该看起来很容易。

使用 [WebAssembly](https://hackaday.com/2021/07/15/you-are-doomed-to-learn-webassembly/) 可以实现惊人的效果。如果你需要一个[的快速介绍](https://hackaday.com/2019/04/04/webassembly-what-is-it-and-why-should-you-care/)，从【本·詹姆斯】那里看看这个。