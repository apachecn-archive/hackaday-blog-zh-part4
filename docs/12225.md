# 主题视频:艾丽西娅·怀特在记忆地图中发现宝藏

> 原文:[https://hack aday . com/2021/12/16/keynote-video-elecia-white-finds-treasure-in-memory-map/](https://hackaday.com/2021/12/16/keynote-video-elecia-white-finds-treasure-in-memory-map/)

如果你喜欢微控制器，并且喜欢探究它们是如何工作的，Elecia White 希望在内存映射文件的帮助下帮助你探索它们最深处的秘密。在 2021 Hackaday Remoticon 的这个令人耳目一新的有趣但非常深刻的主题演讲中，Elecia 引导我们通过编译的最令人生畏的工件之一——一个文件，它列出了*所有东西*在微控制器内存中的位置——并指出有助于使其更易于导航的地标。

当你需要查看地图文件时，你可能真的需要*来查看地图文件。当您的嵌入式小部件神秘地停止工作时，内存问题是一些常见的疑点。也许你用完了 RAM 或 flash 存储空间，也许你有一些奇怪的硬故障，你想知道是程序的哪一部分引起的问题，或者也许你需要做一些速度分析，使它运行得更快。在所有这些情况下，你都会得到一个绝对内存地址。什么住在那里？在内存映射中查找！*

## 绘制航线

Elecia 从“hello world”程序的地图文件开始，但这是一个在 RTOS 上运行的 hello world，所以已经有足够的内容可以挖掘了。她从顶层概述开始:flash 用于代码，RAM 用于程序使用。在 flash 中，代码驻留在`.text`和`.const`中，RAM 有一些你应该很熟悉的部分，比如`.heap`和`.stack`，还有`.data`和`.bss`。内存映射文件也遵循这种结构:首先是概述，然后是部分标记，然后是每个部分的详细内容。

例如，如果您遇到崩溃，并且您知道当程序完全崩溃时，程序计数器的数值在哪里，`.text`部分列出了发生崩溃的函数名。包含全局变量定义的部分，按字母顺序排列？你也许可以这样滚动——映射文件中有很多冗余，有时按内存地址排序，有时按字母顺序排序。你不想*读*一个地图文件，你只想进去，得到你需要的，然后出来。有你认为被覆盖的变量吗？在按地址列出的部分中找到它，并查看它的邻居——其中一个可能已经溢出。

但是这场表演真正的明星是艾丽西娅按照角色扮演游戏的风格制作的美丽地图。从静态海岸穿过初始化之河，你会发现 RAMlandia，栈的高平面，低沼泽堆圣器，和(内存映射)外围寄存器的端口。在未使用的地址空间的海洋中实际上有龙。通过在这个有趣但有用的地图和实际的文本内存地图文件之间来回切换，Elecia 将一个令人难忘的内存视图与地图文件的密集文本联系起来，因为它位于您的项目文件夹中。

如果不注意到当向下增长的 RAM 堆亲吻向上增长的 RAM 堆时会发生什么危险，那么关于微控制器中内存的讨论就是不完整的。接下来会发生什么？再调用一次函数，函数就会开始覆盖你的数据。“这很好。就像一只坐在着火的咖啡馆里的狗。”问题是，这是动态内存管理的一部分，函数调用其他函数，内存被分配和清除。用户输入改变了程序运行的部分，从而改变了数据存储的位置。这是一个记忆地图*帮不了你的地方，除了找出撞车发生的地方附近有什么。但是“我现在有多少内存？”真的是难以形容的“我不知道。”*

如果你是嵌入式设计的新手，也许演讲的前 20 分钟适合你，即使你是一个经验丰富的老手，你也能从后面的部分学到一些东西。我非常喜欢艾丽西娅的演讲，你也一样。你可以在下面观看它。带上幻灯片的副本。

 [https://www.youtube.com/embed/LZCVZ8CSuVE?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent](https://www.youtube.com/embed/LZCVZ8CSuVE?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent)

T2】