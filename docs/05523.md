# 新的部分日:Wi-Fi 踏步机让想法更快工作

> 原文:[https://hack aday . com/2020/02/10/new-part-day-the-wi-fi-stepper-gets-ideas-working-fast/](https://hackaday.com/2020/02/10/new-part-day-the-wi-fi-stepper-gets-ideas-working-faster/)

像我们大多数人一样，我有时沉迷于购买一个零件，因为它的潜在或预期的效用，而不是为了一个特定的项目或目的。这正是我最终使用 WSX100 Wi-Fi 步进器的原因，这是一种单板设备，旨在成为将步进电机集成到项目中的最快最简单的方法之一。我的来自他们的[大众供应活动](https://www.crowdsupply.com/good-robotics/wi-fi-stepper)，为生产筹集资金，并继续接受订单。

## 这是干什么用的？

[![](../Images/4216297fa554b5dde7746f1d6910e05e.png)](https://hackaday.com/wp-content/uploads/2020/02/WSX100-Wi-Fi-Stepper-with-Motor.jpg)

The WSX100 Wi-Fi Stepper Driver (with motor), by Good Robotics

Wi-Fi 步进器存在的主要原因是让步进电机快速简单地启动和运行，而不会将设计陷入困境。该设备当然可以在原型制作之外使用，但我认为它最好的功能之一是能够帮助快速将想法转化为实物。在制作原型时，最好少花点时间在驱动马达这样的基础部件上。

在某种程度上，步进电机有点像集成驱动器和简单接口变得普遍之前的 RGB LEDs 或 LCD 显示器。踏步机需要工作(和合适的电源)来启动和运行，而这种努力可能会阻碍想法的实现。有了 Wi-Fi 步进器，一个马达可以立刻启动并给出位置命令(或设置速度和方向)。通过 WiFi 发送命令，甚至不需要连接任何控制逻辑。

## 为什么使用步进器？

步进电机非常适合任何需要在真实世界中以任何精度进行物理工作的项目。每台 3D 打印机、激光切割机和其他数控设备都使用它们。它们价格低廉，具有标准化的形状和尺寸，可以精确控制，可以直接与许多东西连接，而不需要变速箱。缺点是步进器不太即插即用。它们可能很常见，但它们也是相对复杂的机电设备，需要的不仅仅是施加动力让它们运动。如果你对步进器的概念不熟悉，[这个项目通过使用一个超大的 3D 打印步进器作为视觉辅助工具，漂亮地解释了理论和内部工作原理](https://hackaday.com/2015/08/20/giant-stepper-motor-gets-you-up-to-speed-on-theory/)。

## 无线踏步机提供了什么

WSX100 真正需要做的是连接一个 DC 电源(支持 9-80 V 的输入范围)并连接一个步进电机；NEMA 11、17、23、34 和 42 电机有方便的预置。一旦通电，该板将默认创建一个名为 *wsx100-ap* 的无线接入点，并在名称后附加一个唯一的 id。

简单的操作包括连接到设备的网络，然后打开一个浏览器窗口到 192.168.4.1(或 *wsx100.local* 如果启用)并使用网络界面的快速启动部分。从那里，电机可以设置为伺服模式(电机根据命令移动到某个位置)或速度模式(给定电机一个方向和速度)，然后准备移动。

所有的配置和基本动作都可以通过这个网络界面访问；只需拖动轴的位置或点击一个方向，电机将立即这样做。还有 python 和 RESTful 接口，所以所有的命令和配置都可以使用 HTTP GET 请求来完成，通常来自 Python 或 bash 脚本(后者使用`curl`传送到`[jq](https://stedolan.github.io/jq/)`，这是一个用于命令行 JSON 处理的工具)。)

下面嵌入的是一个演示伺服模式的短视频，其中 NEMA17 电机连接到一个简单的 3D 打印组件。首先，通过拖动 web 界面中的手柄来移动伺服系统，然后运行一个简单的 bash 脚本，演示两点之间的弹跳，每个位置之间有一秒钟的延迟。脚本中的命令来自于从 web 界面的快速代码部分复制和粘贴，这是几个方便的功能之一。

 <https://hackaday.com/wp-content/uploads/2020/02/WSX100-Wi-Fi-Stepper-Servo-Mode-Video.mp4?_=1>

[https://hackaday.com/wp-content/uploads/2020/02/WSX100-Wi-Fi-Stepper-Servo-Mode-Video.mp4](https://hackaday.com/wp-content/uploads/2020/02/WSX100-Wi-Fi-Stepper-Servo-Mode-Video.mp4)

## “快速编码”功能

我想强调一下网络界面中一个特别方便的部分。在设置了所有需要的配置选项(从 NEMA 11 到 42，以及失速检测、关机参数等都有预置)并可选地给出一个移动命令后，一个快速代码窗口为 Python 和 Bash 脚本提供匹配的示例代码。因此，在使用 web 界面进行测试之后，剪切和粘贴将提供代码来做完全相同的事情。

Wi-Fi 分档板*没有*的是用于绝对电机位置感测的硬件编码器。这并不罕见，但不要误解为“伺服模式”意味着这种编码器的存在。在这种情况下，伺服模式是指通过告诉电机轴转到特定位置来移动电机轴，然后电机轴会执行该操作并保持该位置，直到收到进一步通知。

我还想了解一个特性:无线安全性。

## 让我们庆祝安全*不是*的事后想法

这个项目吸引我眼球的是开发过程中对安全性的重视程度。原则上，注意安全是一种好的做法，但是还有一个实际的考虑。开发人员提出了一个有效的观点，即由于该板可以支持大电流下的大电机，因此有人不当对待或损害该单元并告诉它做它不应该做的事情可能会导致真正的损坏。安全性总是值得认真对待，但是正如开发人员所说:

> 安全是**硬**。真的很难。在一个物联网设备安全性差出了名的世界里，我们希望(我们的努力)是朝着正确方向迈出的一步。

通过阅读开发者更新，你可以对安全设计有所了解，开发者更新解释了他们是如何保护像这样的设备的。简而言之，它首先陈述一些关于设备将如何使用以及在什么环境下使用的假设，然后让安全设计从这些点开始。

在 WSX100 Wi-Fi Stepper 的情况下，假设设备将在安全的环境中进行供应和配置，不会将敏感信息作为命令的一部分进行传输，并且物理安全性(例如篡改保护和检测)不在范围之内。从这些假设出发，WSX100 的安全性集中在确保只有来自经过验证的来源的命令才被认为是有效的(阻止像中间人和重放攻击这样的事情。)

为此，WSX100 使用 Microchip 的 [ATECC508A 来提供一个认证密钥框架，如果启用，API 可以轻松实现。一旦在设备上设置了主密钥，命令就会以不加密的方式传输，但会附加一个计算签名。如果命令的签名无效，则该命令不合法。不可能从签名中推导出主密钥，并且通过不对传输进行加密，增加的开销和延迟最小。](https://www.microchip.com/wwwproducts/en/ATECC508A)

该小组还解释了尚未解决或仍可能导致问题的可能的安全问题。例如，对于无线设备，拒绝服务或阻塞是可能的。虽然无法阻止此类攻击，但可以使用超时来确保电机在失去连接的情况下停在安全的位置。

很高兴看到安全性受到重视，而不是事后才想到。

## 情况如何？

Wi-Fi Stepper 易于安装和运行，支持多种电机和电压，安全性也不容忽视。到目前为止还不错，但是它做得最好的是什么，有什么不足之处吗？

作为一个在我通常的项目中不使用步进机的人，一些最好的价值来自于让它们几乎即插即用。任何做体力工作的项目(像自动宠物喂食器或自动窗帘)越容易开发越好。同样重要的是要考虑它*没有*做的事情。

Wi-Fi 步进器在让电机运转方面绝对做得很好，但它没有任何外部传感器(如限位开关)或添加它们的简单方法。这意味着告诉一个马达“开始转动”非常容易，但是添加“…直到这个开关被按下，然后停止”取决于开发者。【更新:好消息！实际上这是有原因的。是 **SW** 引脚和 [GoUntil](https://www.wifistepper.com/commands/motor.html#gountil) 命令。另见下文。]同样，没有内置的编码器支持来跟踪和检测电机的实际位置，因此需要编码器的应用程序需要添加一个编码器并单独管理。API 和 web 界面不会知道它们。

尽管如此，位置编码对于有效使用步进器并不是必要的，该设备的伺服模式——告诉电机移动到某个位置并停在那里的能力——可以覆盖大多数基础。尽管如此，能够集成一两个限位开关将是一个很好的功能。【更新:】SW 引脚可用于连接调零或限位开关。它与 [GoUntil](https://www.wifistepper.com/commands/motor.html#gountil) 命令一起工作，令人尴尬的是，我完全错过了这个命令，直到有人友好地向我指出。]

能够用最少的布线和比浏览器窗口多一点的方式让步进器运行是一个非常好的工具，我很高兴将它添加到我的工作台中。当然，WSX100 Wi-Fi 步进器是开源的。Github 库在这里，在线文档在 wifistepper.com 的 T2。它可以直接从大众供应的[获得。](https://www.crowdsupply.com/good-robotics/wi-fi-stepper)