# Kindle、EPUB 和亚马逊对重新发明轮子的热爱

> 原文：<https://hackaday.com/2022/05/17/kindle-epub-and-amazons-love-of-reinventing-wheels/>

上个月，一个来自相对不知名的好的电子阅读器的帖子声称[亚马逊将最终允许 Kindle 阅读 EPUB 文件](https://goodereader.com/blog/kindle/the-amazon-kindle-will-support-epub-in-late-2022)。这个故事被所有主要的技术网站转载，一时间，人们欢欣鼓舞。毕竟，这是自 Kindle 于 2007 年首次发布以来，用户们一直要求的功能。但是，亚马逊并不支持开放的电子书格式，而是一直坚持提出自己的专有格式，用于他们的读者。因此，许多用户转向第三方程序，这些程序可以可靠地将他们的个人图书馆转换成他们特定的 Kindle 最兼容的任何亚马逊格式。

对 EPUB 的原生支持会让许多人在使用 Kindle 时少了很多麻烦，但遗憾的是，事实并非如此。没过多久，最初的帖子被更新，澄清亚马逊只是在他们的*发送到 Kindle* 服务中添加了对 EPUB 的支持。当然，这仍然是一个进步，因为它代表了一种在个人设备上获取开放格式文件的相对省力的方式；但是在通过该服务发送文件时，它们会被转换成 Amazon 的 KF8/AZW3 格式，结果可能并不总是如你所愿。与此同时，*发送给 Kindle* [的文档指出，对 AZW 和 MOBI 文件的支持将在今年晚些时候被移除](https://amzn.to/3vTqUib)，因为旧格式与最新 Kindle 型号的所有功能不兼容。

如果你认为仅仅为了让纯文本文件在世界上最流行的电子阅读器上显示就有很多不必要的混乱，你并不孤单。当 EPUB 中已经有了一个公认的行业标准时，用户不应该再费力地去阅读一大堆古怪的文件格式。但考虑到使用亚马逊阅读器时的现实，这似乎是一个很好的时间来简要概述不同的电子书格式，并看看我们最初是如何陷入这种混乱的。

## EPUB

EPUB 格式的历史可以追溯到 1999 年开放电子书出版结构(OEBPS)的 1.0 版本。索尼(Sony)和英特尔(Intel)等最早的专用电子阅读器使用它，它基本上由一个包含以 XHTML 形式编写的页面的清单 ZIP 存档组成，CSS 用于样式化。多年来，OEBPS 经历了多次修订，并于 2007 年成为国际数字出版论坛(IDPF)的官方技术标准。那时它被更名为 EPUB，是电子出版物的缩写。

[![](img/02eadd01ee9972e57c810afe92feb33c.png) ](https://hackaday.com/wp-content/uploads/2022/05/epub_logo.png) EPUB 多年来不断发展，2016 年 IDPF 与万维网联盟(W3C)合并，试图让出版业跟上网络发展的最新步伐。当前版本的 [EPUB 格式(3.2)于 2019 年 5 月](https://www.w3.org/publishing/epub3/)发布，并提供了诸如互联网连接设备从容器文件本身外部加载字体和其他内容的功能。

虽然 3.x 分支在核心格式中引入了一些相当大的变化，以更好地处理多媒体内容，但 EPUB 最终仍可被视为包含在 ZIP 文件中的相对简单的网页。由于它们非常容易解析和呈现，您甚至可以在非常低端的设备上找到 EPUB 阅读器应用程序。

同样值得注意的是，尽管 EPUB 格式允许数字版权管理(DRM)使用 T1，但它不是标准的一部分。这意味着如果一个供应商想在 EPUB 中实现 DRM，他们必须自己想办法去做。理论上，这可能会导致特定于供应商的解决方案之间的不兼容问题，但实际上，大多数使用 EPUBs 的人都是因为他们没有 DRM 才这样做的。

## MOBI/AZW

甚至比 EPUB 还要早，MOBI 的起源是 1996 年的 PalmDOC 格式。这种格式最初被认为是在 Palm Pilot 上存储大型文本文件的一种方式，除了能够标记段落的起点和终点之外，它几乎没有提供其他格式。然而，它提供了基本的书签功能，在某些情况下，它被用来提供一个基本的目录。由于 PalmDOC 是标准的“Palm Database”文件的变体，它还具有在标准化标题中存储各种元数据的能力，比如作者姓名、书名和当前阅读位置。

[![](img/5d27377f747836636874c3e5dc001ab9.png)](https://hackaday.com/wp-content/uploads/2022/05/ebookformats_mobipalm.png)

MobiPocket Reader on Palm OS

虽然对于早期 Palm Pilots 的低分辨率显示器来说已经足够了，但是随着硬件的改进，PalmDOC 中缺乏任何真正的格式支持成为了一个不利因素。2000 年，在 Palm、Symbian 和后来的 BlackBerry 设备上开发电子书阅读器应用程序的开发人员 MobiPocket 决定自己动手，扩展 PalmDOC。他们添加了一种类似 HTML 的 markdown 语言，改进了对图像的支持，并且由于它是一种开放的格式，甚至从 OEBPS 借鉴了一些东西。由于他们没有权力称之为原始 PalmDOC 的更新，他们将他们的发明命名为 MOBI。

如果不是亚马逊在 2005 年收购了 MobiPocket，并进而收购了 MOBI 的版权，这个故事可能就到此为止了。但是他们没有使用 Kindle 的原有格式，而是添加了一个新的 DRM 方案，并将格式的 LZ77 压缩调到最大。由于第一代 Kindle 仅提供相对微薄的 250 MB 板载存储，并且仅限于通过 3G 蜂窝连接下载新游戏，他们希望尽可能减少字节数。

这种 MOBI 的微调版本，成为亚马逊电子书帝国的标准格式，被称为 AZW。从现在开始，亚马逊基本上开始使用 AZW 作为他们电子书容器的统称，实际格式开始变得有点模糊。在早期，可能会遇到其他类似命名的文件类型:

#### 阿兹 W1

正式名称为 Topaz，这种专有的亚马逊格式除了共享的 DRM 方案和类似的元数据头之外，与 MOBI/AZW 没有什么关系。与早期的格式相比，除了支持更大的图像，它的独特之处在于每个标题都可以包括自己的字体和字形，而不是依赖于 Kindle 本身的内置内容。这使得它非常适合旧书或非英语作品，因为它可以更好地保留原文和风格。

#### AZW2

这实际上根本不是电子书格式，所以如果你从未遇到过也不要惊讶。相反，这是一个可执行的 Kindle 应用程序和游戏的容器文件。

### KF8/AZW3

随着 2011 年首款 Kindle Fire 平板电脑的发布，亚马逊需要一种新的格式来处理多媒体内容。答案是 KF8，它本质上是 EPUB 和 MOBI 的结合。事实上，它特别采用了 EPUB 3.x 的一些特性，比如对 HTML5 和 CSS3 的支持。对固定布局页面和 SVG 图像的新支持使这种格式非常适合漫画书，这是 Kindle Fire 大彩色显示屏的一大卖点。

亚马逊没有维护两种不同的文件格式，而是决定将他们所有的阅读器转移到 AZW3，并使其成为市场的新标准。虽然电子纸 Kindles 可能不一定受益于新格式提供的功能，但由于专为向后兼容而保留的冗余 MOBI 标头信息，除了第一代和第二代之外的所有产品都能够阅读它们。

### KFX/AZW8 突击步枪

随着 2015 年 Kindle Paperwhite 3 的发布，亚马逊推出了他们的最新格式 KFX。关于 KFX 的技术信息有点难以获得，因为它似乎是亚马逊内部开发的，是他们的“终极”图书格式。一些新的改进包括增强的排版引擎、额外的字体和对 JPEG XR 图像的支持。它还支持视频和互动，理论上允许书籍和软件应用程序使用相同的格式。

但也许最明显的变化是增强的 DRM，这给那些希望在其他设备上阅读亚马逊购买的电子书的用户带来了很多麻烦。在这一点上，格式和 DRM 已经被很好地理解了，可以由第三方软件来处理，但是它需要额外的步骤和中介工具，而 AZW3 内容不需要这些。

一般建议，任何希望维护自己本地电子书文件库的人都应该完全避免这种格式——尽管随着越来越多的亚马逊图书馆转向这种格式，这可能意味着你需要从其他地方购买书籍。

## 亚历山大在你的硬盘上

如果你所做的只是在 Kindle 上阅读亚马逊购买的书籍，那么你可能从未担心过这些。值得称赞的是，亚马逊在很大程度上完善了购买和消费电子书的体验——毕竟，Kindle 成为事实上的电子书阅读器是有原因的。所有这些技术上的变化都是隐藏的，在大多数情况下，你只需点击你想读的书，继续你的生活。

但是对于我们这些想要从多个市场采购图书、保留所购图书的离线副本，或者在非亚马逊阅读器上阅读亚马逊图书的人来说，事情可能会变得有点混乱。我能给你的最好的建议是，如果你已经设法做到这一步而没有听到它，那就去拿一份科维·戈亚尔的惊人的*口径* 。

这个跨平台的 GPLv3 程序可以让你建立一个与格式无关的虚拟库，它可以在你的本地计算机上运行，并在上传到阅读器时无缝地执行特定于设备的文件转换。这可能不像在亚马逊的围墙花园里度过你的日子那么容易，但对于那些要求对他们的数字内容有更多控制权的用户来说，这是值得付出的代价。