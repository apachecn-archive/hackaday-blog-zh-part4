# 32 位 Linux 的传奇:为什么走向 64 位会引起对 Multilib 的关注

> 原文:[https://hack aday . com/2019/07/09/the-saga-of-32 位 linux-why-going-64 位-raises-concerns-over-multi lib/](https://hackaday.com/2019/07/09/the-saga-of-32-bit-linux-why-going-64-bit-raises-concerns-over-multilib/)

到目前为止，Linux 的故事，尽管从整体来看可能很短，却是一个不断向前发展的故事。总是有另一个特性要实现，一个优化要进行，当然，还有另一个设备要支持。由于开发人员的眼睛总是盯着前方的地平线，所以发现对旧硬件或协议的支持偶尔会半途而废也就不足为奇了。当维护过时的代码占用了开发人员的时间，甚至与新代码直接冲突时，就需要做出艰难的决定。

[![](../Images/1e20b4c44356034942fe07df8168d9ec.png)](https://hackaday.com/wp-content/uploads/2019/04/tux.png) 当然，有些决定比其他的更容易做出。早在 2012 年，当 [Linus Torvalds 正式结束对传统 386 处理器](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=743aa456c1834f76982af44e8b71d1a0b2a82e21)的内核支持时，他以“终于摆脱了”结束了提交消息维护对这种旧硬件的支持多年来一直在幕后使事情变得复杂，同时提供的实际好处很少，因此删除所有遗留代码就像减轻了开发人员的负担。

几年前，当像[Arch Linux 这样的发行版决定完全放弃对 32 位硬件的支持时，基本原理是一样的。维护人员已经注意到 32 位版本下载量的下降，并决定继续生产它们没有意义。在这个时代，即使是廉价的智能手机也配有 64 位处理器，许多 Linux 发行版在这一点上已经决定 32 位 CPU 不值得他们花时间。](https://www.archlinux.org/news/the-end-of-i686-support/)

鉴于这种趋势，你可能会认为 Ubuntu 上个月宣布不再提供 32 位版本的软件包不会有什么新闻价值。但事实证明，终止 32 位软件包的威胁引起了我们在 Linux 社区中传统上看不到的骚动。但是为什么呢？

## 没有遗产的操作系统

需要说明的是，一段时间以来还没有一个官方的方法可以在 32 位电脑上安装 Ubuntu。自 2018 年 4 月发布的 18.04 版本以来，Ubuntu 仅提供 64 位安装程序。不支持任何获得比运行在传统硬件上的版本更新的替代方法，风险由用户自行承担。

[![](../Images/2579d1e08bbb4c28b9057519f19e58db.png)](https://hackaday.com/wp-content/uploads/2019/06/linux32_taskman.png)

Mix of 32 and 64-bit processes on Windows

由于去年停止支持在 32 位硬件上安装相当容易，Ubuntu 得出结论，今年也应该停止为过时的架构提供软件包。所有现代软件要么是专门为 64 位硬件开发的，要么至少可以在 64 位机器上编译和运行。因此，只要用户确保他们所有的软件包都更新到最新版本，应该没有问题。

这是一个完全合理的假设，因为总的来说，Linux 没有“遗留”软件的概念。为 Linux 开发的软件通常以源代码的形式发布，然后由发布版本的维护者编译，并通过包管理系统提供给最终用户。不太常见的是，最终用户可能自己下载源代码并在本地编译。在这两种情况下，不管软件本身有多老，用户最终都会得到一个适合他们特定发行版和架构的二进制包。

简而言之，2019 年的普通 Linux 用户应该很少会发现自己试图在 64 位机器上运行 32 位二进制文件。这与 Windows 用户形成了鲜明的对比，后者倾向于从开发者那里获得预编译的二进制文件形式的软件。如果开发者没有更新他们的软件，那么它很有可能永远是 32 位应用程序。

出于这个原因，Windows 将允许 32 位软件在未来许多年内无缝集成。但是对于 Linux 来说，这种能力并不那么重要。大多数发行版确实提供了在 64 位安装上运行 32 位二进制文件的能力，这是通过一个名为 *multlib* 的概念实现的，但是为了减小安装大小，默认情况下禁用这一功能的情况并不少见。当 Ubuntu 宣布不再提供 32 位软件包时，社区担心他们会失去这种多库功能。对 32 位硬件的支持已经来了又去，但是对 32 位库的支持却完全不同。

## 游戏玩家奋起反抗

因此，如果没有大量的 32 位 Linux 软件需要担心，那么谁真正需要多库支持呢？对于只运行发行版官方存储库中的包的用户来说，这通常是不必要的。但是 Ubuntu，可以说是世界上最流行的 Linux 操作系统，是一个特例。

[![](../Images/598842d038367e76b480e16f6af1efe0.png)](https://hackaday.com/wp-content/uploads/2019/06/linux32_steam.png)

A Valve developer throws down the gauntlet.

由于如此受欢迎，Ubuntu 经常是最近 Windows convert 的首选发行版，而且由于 Valve 的 Steam 游戏发行平台的官方支持，Ubuntu 已经成为 Linux 上游戏的实际家园。这意味着普通 Ubuntu 用户更有可能尝试通过 WINE 运行 32 位 Windows 程序，或者从未更新为 64 位的 Steam 游戏，而不是运行更小众的发行版。

当 WINE 和 Steam 开发人员听说 Ubuntu 可能会放弃他们各自项目所依赖的 32 位库时，两个阵营都发表声明说，他们将不得不重新评估他们在未来发行版中的地位。Ubuntu 用户的担心是可以理解的，他们对这一潜在场景的强烈不满引发了来自科技媒体各个角落的一系列文章。

## 目前，32 位仍然存在

随着 WINE 和 Steam 可能不再支持它们的发布，Ubuntu 开发者只花了一两天就调整了他们的路线。在 Ubuntu 官方博客的一篇文章中，开发者明确表示他们从未打算在未来版本的 Ubuntu 上完全禁用运行 32 位“遗留”程序的能力。但更重要的是，他们承诺将与 WINE 和 Steam 背后的团队密切合作，以确保他们的软件所需的任何和所有 32 位库在可预见的未来仍将是 Ubuntu 软件包库的一部分。目前，一场危机似乎已经避免。

但是能持续多久呢？最终从现代操作系统中移除原生运行 32 位软件的能力在什么程度上是可以接受的？这个故事在黑客日地堡引发了一场内部辩论。在一次非正式的投票中，我们中的一些人甚至不知道我们的 Linux 系统是否安装了运行 32 位二进制文件的软件包，只有我们中的一个人能够说出他们使用的需要该功能的确切应用程序。还有一些人认为，虚拟化已经使得没有必要在本地运行这样的软件，从安全的角度来看，任何落后的代码都应该在虚拟机上运行。

我们的企鹅阅读器上一次通过 WINE 调用 multilib 来运行非闭源游戏或 Windows 程序是什么时候？如果你运行的是 Windows，你有没有想过你机器上的各种程序实际上是为什么架构编译的？请在评论中告诉我们。