# 图书馆膨胀会让你的智能手机应用程序看起来很胖吗？

> 原文:[https://hack aday . com/2018/12/18/does-library-float-make-your-smart phone-app-look-fat/](https://hackaday.com/2018/12/18/does-library-bloat-make-your-smartphone-app-look-fat/)

虽然早期的智能手机似乎可以很好地处理只有几兆字节的单个应用程序，但细读现代智能手机软件商店可以发现一些非常大的文件大小。事实上，我们已经习惯了移动应用程序需要 100 多 MB 的下载量，如果你停下来想一想，这是非常疯狂的。

看到 iOS 版 Nest 应用接近 250 MB 的报道，[【Alexandre Colucci】决定调查一下](https://blog.timac.org/2018/1211-analysis-of-the-nest-app-for-ios/)。在他的博客上，他不仅记录了将应用程序一部分一部分拆开的过程，以找出是什么占用了所有的空间，还列出了一些可能的修复方法，这些方法可能会减少一些。即使你不打算探索你的袖珍超级计算机的网飞应用程序的特殊变体，他在这里使用的方法和工具本身就很迷人，可能是值得添加到你的软件包中的东西。

通过将应用程序的文件通过一个名为 GrandPerspective 的磁盘使用可视化工具，[Alexandre]立即发现了一些相当大的内容块。该应用程序的 Apple Watch 捆绑版本占用 23 MB，用于引导用户完成设备设置的视频和音频占用 22 MB，各种语言的本地化文件消耗了令人惊讶的 33 MB。但是对应用程序重量贡献最大的是各种各样的库和框架，总共达到令人难以置信的 67 MB。

[![](../Images/aa5e1aca44cc40e2fe8ad627b16e6e06.png)](https://hackaday.com/wp-content/uploads/2018/12/fatapp_detail.jpg) 当然问题是，这其中有多少是真正必要的？从局外人的角度来看，这很难确定，但是[Alexandre]指出，使用的一些库似乎是多余的或过时的。在某些情况下，这可能是老代码仍然潜伏在项目中的结果，但是用于用户跟踪的四个不同的库**可能不是偶然出现的。同样合理的是，教学视频可以下载到 YouTube 之类的网站上，这样只有需要观看的用户才需要在上面花费带宽。**

更深入一点，[Alexandre]注意到一些本地化图片似乎是多余的。作为一个具体的例子，他指出鸟巢本身显示华氏和摄氏温度的图像。虽然从逻辑上讲，这应该只有两个图像文件，但实际上有八个 Celsius 图像的副本，每个副本都作为特定于语言的文件归档。这些冗余的本地化图像可以很容易地被去除，但是由于只有几百千字节的增益，在开发过程中可能不值得这样做。

最终，通胀并没有我们想象的那么严重。有一些多余的文件，可能有一些有问题的库包含，苹果手表版本的应用程序肯定可以被分离出来。总之，它可能会为您节省 30–40%的空间，但仍不足以将其降低到 100 MB 以下。

所有迹象都表明，现代智能手机软件开发比我们黑客可能喜欢的要麻烦得多。除了那些希望将控制权交还给用户的[项目](https://hackaday.com/2018/01/09/postmarketos-saves-old-smartphones/)，看起来移动操作系统不会很快瘦身。