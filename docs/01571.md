# 寻找金凤花细胞模块

> 原文:[https://hack aday . com/2019/01/04/finding-the-Goldilocks-cell-module/](https://hackaday.com/2019/01/04/finding-the-goldilocks-cell-module/)

如果一个蜂窝调制解调器正在处理一个硬件组件的戏剧女王，那么从众多可用的模块类型中进行选择会把设计者变成一个电子金发女郎。有无穷无尽的包装和功能选项，旨在让您的生活更轻松(或不轻松！所以你——设计者——需要对工作中的各种力量有一个清晰的理解，才能做出合理的决定。Widget D'lux 最终还会以什么方式发货？你*还在做 Widget D'lux，是吗？*

好，快速回顾一下上次的[。蜂窝调制解调器可以用来为您的产品添加被称为互联网的伟大功能，这是物联网的必要组成部分，因此很好。所以你要加一个手机调制解调器！但是“增加一个手机调制解调器”几乎可以意味着任何事情。你的目标是成为高通和~~起诉苹果~~从零开始制造调制解调器吗？大概不会。把一个粒子电子粘在里面来快速把东西栓在一起怎么样？或者和 Telit 通话，把一个光秃秃的调制解调器放在一块板上？除非你预计需要极高的音量，并对认证乐有健康的胃口，否则我打赌你会选择获得尽可能多的现有认证的调制解调器，这将我们带到今天的位置。如果你想更详细地讨论你的调制解调器封装选择和其中的一些权衡，可以去读读上一篇文章。](https://hackaday.com/2018/11/15/choosing-cell-modems-the-drama-queen-of-hardware-design/)

# 细胞模块谱

粗略地在网上搜索一下，就能找到大量对蜂窝调制解调器模块没有帮助的选项。哪些参数很重要？为什么你会选择一个而不是另一个？一个小小的市场调查可以让大多数单元模块有多种选择，这也是本文的主题。值得注意的是，还有一个关于 cell *技术*的讨论，我们还没有讨论过，但那将是以后的事情。现在，我们假设所有这些选项都满足我们的需求。有了这个警告，我们开始吧！

![](../Images/5be00fec0a2a7bf892bbde9450fbb7e4.png)

A Cheesy Graph to Illustrate my Point

为什么我选择 X 轴？嗯,*频谱*实际上归结为一个供应商在网络连接上包裹了多少层[糖](https://en.wikipedia.org/wiki/Syntactic_sugar)。根据我的经验，每种将设备联网的方法从根本上来说都很糟糕，但它们糟糕的确切方式*是不同技术之间的差异。手机调制解调器也没有什么不同，但就像 WiFi、ZigBee、蓝牙和其他东西一样，每个提供商都以不同的方式打包相关的 API。因此，从这个意义上来说，这个范围是从“容易开发”到“难以开发”的。*

## 网络是如何工作的？

![](../Images/7790c715e234f175736ec0eda58f78f4.png)

Innocent Palm Tree

细胞调制解调器有一个额外的层，其他一些技术避免或中间；蜂窝调制解调器连接到互联网。很明显，这是相当简化的，因为调制解调器实际上并不直接连接到互联网。什么？困惑了吗？调制解调器连接到手机运营商，手机运营商依次在内部路由数据，*T3*有时*可以连接到互联网。比方说，ESP8266 也是如此，但在这种情况下，ESP 连接到您的家庭 WiFi，您的 WiFi 连接到调制解调器，调制解调器拧入同轴电缆连接，最终通向您的 ISP。你付钱给你的网络服务提供商，让他们通过那根电缆给调制解调器提供网络，WiFi 就可以上网了，就这样。这里的区别很微妙但很重要。在 ESP 示例中，您的小部件和互联网之间的关系与您的笔记本电脑和互联网之间的关系相同。康卡斯特不在乎你插什么，事实上他们*看不到*连接的是什么。蜂窝调制解调器就不是这样了。*

蜂窝调制解调器直接连接到运营商。这种关系由插入设备的 SIM 卡控制。蜂窝调制解调器只知道如何连接到与插入的 SIM 卡相关的运营商，其网络连接完全由该运营商控制。在某些配置中，调制解调器的网络连接实际上不会在公共互联网中终止。我发誓这种题外话的特殊性将是相关的，所以请耐心听我说。

无论如何，这种关系还有另一层含义，那就是每个蜂窝调制解调器都将连接到一个网络。因此，前几段我们提到供应商可以围绕网络相关的 API 提供一个漂亮的糖衣？这可以绕过硬件，将连接的另一端也包含在别人的电脑云中。从“什么都自己做”到“你发送一些数据，它就神奇地出现在我们云中的网络钩子上。”

## SIM 卡定价和计划的旁白

在我们分解频谱元素的含义之前，我们应该花点时间讨论一下手机计划。对于像这样的小型设备，可用的计划是为所谓的“机器对机器”消息传送而设计的。即使调制解调器有足够的带宽来传输 8K 的 HDR 烹饪节目，运营商也希望他们一小时发送一条信息，或者一天发送一条信息。M2M 的计划倾向于每台设备的维护和注册成本较低，只允许很少的数据流量，而不是提供大量的数据、文本和语音流量。人们的期望是，购买者正在管理一个由几千/几万/几十万台设备组成的团队，但是每台设备发送和接收的数据非常少，并且计划的价格也相应地确定。DigiKey [最近转售了 M2M 数据模拟公司](https://www.digikey.com/en/resources/iot-resource-center/iot-cellular-data-plans),这样你就可以把他们的定价作为指导方针，尽管我发现这与我见过的运输产品的协议有很大不同。作为另一个参考点， [NimbeLink 也列出了价格](https://nimbelink.com/cellular-plans/)。像所有的事情一样，这是一个可以商量的因素，规模会有所帮助。

![](../Images/81e5702fbc85c17856b02f10a711b1d9.png)

最后一点；您始终可以使用普通的消费手机数据 SIM 卡，而不是特定的 M2M SIM 卡。如果你只是在建造一个东西，如果你能找到一个低开销的计划，这可能是一个不错的选择。有一些美国运营商的每 SIM 卡成本相对较低，而且运行良好。我过去用过美国手机，如果你是 Google Fi 的用户，他们的纯数据 sim 卡可能会工作，尽管显然没有短信服务。

## 其他考虑

销售电池模块的供应商希望它们能被大量部署到大量终端设备上，这与我们刚刚谈到的 M2M SIM 卡的预期用例是一致的。一些供应商将在他们的解决方案中打包销售“车队管理”功能，即使他们没有提供太多额外的好处。典型的设备群管理工具将让您看到每个节点的基本遥测数据，例如哪些设备是活动的、连接质量和调制解调器版本。有些还可以让你跟踪每台设备的资源消耗，以帮助管理支出。这种遥测通常独立于您的应用可能报告的任何数据。车队管理工具可以通过 API 公开这些批量元数据，以便将它们插入到您的应用程序级数据存储中，从而包含在其他健康指标中。

在前一篇文章中，我们对保持你的调制解调器更新做了一个即兴评论，但这不是开玩笑。每个运营商都希望你的调制解调器保持最新，否则他们可能会把你赶出网络。这是一种保护措施，以确保有缺陷的设备不会破坏每个人的事情，但这意味着你的设备*必须*提供它。一些供应商将其作为远程 OTA 功能，作为车队管理解决方案的一部分。如果这不是一个选项，您的用户固件可能需要下载和应用调制解调器更新本身。这可能会特别复杂，因为与所有在线旅行社一样，如果出现问题，你的设备可能会永久退出网络。重申一下，这种 OTA 与远程更新用户固件的功能是*分开的*，两者并不一定相互暗示。

# 打破现代频谱

咻！注意事项完成后，终于到了详细讨论频谱的时候了。为此我准备了…又一张桌子！请记住，这不是一个详尽的列表，也不意味着对任何特定选择的认可。这仅仅是在撰写本文时市场的代表性选择。

![](../Images/dc55cebef3f888a7c1afe437a8781283.png)

## 全脂

![](../Images/7a4dbd04a8b246f54e9440ff8167f005.png)

A Particle E Series Module

在“全脂”类别中，我们的产品几乎涵盖了一切。这些供应商会卖给你一个蜂窝计划，包装每一个网络 API，并使发送和接收数据尽可能容易。这通常意味着设备上的 API 看起来像“message.send()”，数据会神奇地出现在完整的后端。无需编写复杂的网络状态错误处理。没有要调试的成帧和解帧。他们的基础设施只是*请求*在其中运行一些你的服务器代码。这里的两个例子是[粒子](https://www.particle.io/)和[电动 Imp](https://www.electricimp.com/) 。这两家公司都在基本相同的前提下销售产品:“构建网络连接硬件很难，所以使用我们的产品可以使它变得容易。”

毫不奇怪，这一细分市场的解决方案往往价格昂贵，以换取易用性。但是，即使定价更容易，他们也可能将小区规划完全抽象化，这样开发者就不必与运营商或任何其他组织交谈。你得到一个单一的实体来处理一种定价模式。

![](../Images/74e791039306b0a29c6581453cb51536.png)

The Electric Imp impC001

显然，这些对于快速启动新项目来说是很好的选择，但是它们也涉及到更多的平台锁定。你可以在一个地方购买*所有东西*，从云基础设施到车队管理、电气接口到供应商关系。如果你试图退出，什么都不会继续，甚至计划价格也需要从头开始协商。这对于供应商来说是一笔好交易，但从长远来看，对于硬件制造商来说可能会非常昂贵，这取决于您的业务模式。

对于一个 SLA 来说，也有控制权和可见性的交换。如果一个完整的 fat 供应商的基础设施的内部组件出现故障、变得不可靠或发生重大变化，那么与现场应用工程师沟通可能是唯一的解决办法。而如果事情*真的*走下山坡，你想离开，参照前面关于锁定的一点。

## 2%

啊，美妙的 2%，全脂的美味，没有随之而来的罪恶感。2%的“中等脂肪”选项位于“包括太多电池”和“用荒岛上的棍子做”之间的最佳位置。这里有一个比下面的无脂肪选择更温和的底层硬件接口，但实质上更少手握全部脂肪。medium fat 选项与其他选项有两个主要的不同之处，包括网络基础设施和设备 API。

![](../Images/980f5a014956fb3f4e89715c5ca5727e.png)

The Catchy LinkLabs LL-LTE-M-VZN-S

如果您通过云服务从调制解调器硬件购买整个堆栈，每个完整的 fat 供应商都会更喜欢。这种安排确实是他们产品的设计方式，*这是*特殊的调味汁。虽然通过直接在设备上发出 web 请求，可以使用完整的 fat 模块而不需要整个后端，但这将抵消较高成本的大部分好处。中等脂肪供应商大多不提供这种选择；他们给你一个可以打开插座的调制解调器，剩下的就交给开发者了。他们*做的*加的是车队管理。我最喜欢的两个例子， [LinkLabs](https://www.link-labs.com/) 和 [Digi](https://www.digi.com/) 都提供了调试和管理大型设备组的接口，并且都支持远程调制解调器 OTA。

关于 LinkLabs 产品的一点小插曲。还记得我曾竭尽全力描述蜂窝调制解调器如何与运营商对话以调解其网络连接吗？LinkLabs 模块以这种方式路由所有流量，不提供其他选择。为了接入互联网，所有的流量都要经过威瑞森的基础设施，然后再经过 LinkLabs 的基础设施，最后才进入公共网络。

![](../Images/5c9cddc1c28b8b2b358d0935b6b9d40c.png)

A Digi XBee Cellular LTE Cat 1 Module

变得中等胖的另一个好处是更好的设备端网络 API。如果你挖得足够深，大多数调制解调器在引擎盖下讲指令。对于无脂肪选项，开发人员需要自己编写与调制解调器直接交互的代码。这当然是可能的，毕竟 AT 命令并不太复杂，但它确实迫使开发人员花费一些时间来处理难看的调制解调器数据表，并且它不能将主固件与特定调制解调器的异常隔离开来。中型 fat 选项具有与全 fat 选项相同的优势，以友好的邻居协处理器的形式提供所有杂乱的调制解调器支持，理想情况下隐藏在 UART 和供应商提供的 C 库之后。

另外，这次是关于数字模块。Digi 可能是一个熟悉的名字，因为他们制造了无处不在且经常混淆的五边形 XBee 模块。它们的电池模块采用完全相同的外形，并使用相同的引脚排列。有可能将他们的一个 WiFi 或 ZigBee 模块换成 cell 并继续使用它，而无需更改代码，除了不再有意义的 API。

## 脱脂的

如果所有这些选项都很复杂，脱脂就不是了。无脂很简单！你想要手机调制解调器吗？你不想要别的吗？太好了！选择无脂肪细胞模块！尽管这里的界限可能有点模糊。

![](../Images/790d12c621ae916737b88e64782e074d.png)

A NimbeLink Cell Module

上述较胖的电池模块通常通过在封装中添加第二个微控制器来获得其良好的功能，而不是仅在 PCBA 中提供调制解调器。这使得它们可以包括任何需要的垫片和衬垫，以使软件和电气接口更加可口。但是即使没有这种搭载微处理器，在这些调制解调器中也存在一些电气和机械交叉兼容性。

我们的示例无脂模块供应商 [Nimbelink](https://nimbelink.com/) 和 [Multitech](https://www.multitech.com/) 都销售与该系列中的其他选项尺寸兼容的模块，但它们不像 Digi 的 XBee 系列那样通用。这里，它更像是电气可比性，而不是软件，这意味着电源引脚在相同的位置，电平转换器在 IOs 上，UART TX/RX 对在相同的引脚上。相对于为新的蜂窝调制解调器从头开始重新设计电路板，这无疑是一个改进，但仍然需要固件来适应。

## 现在怎么办？

那么，这一切给我们留下了什么？正确的选择是关于期望的。(而钱，永远都是钱的问题。)你的项目或产品有多少是你期望做的？你希望有多少其他人或雇员能够参与这个项目？你能把经常性成本转嫁给客户吗？您希望长期销售和支持该产品吗？国际上？(我们甚至还没有把那罐虫子从货架上拿下来！)

如果你正在做一些东西，或者可能无法为一个大团队配备人员，或者想要快速推出，或者可以将成本转嫁给你的客户，那么全脂选择可能适合你！如果你想要绝对最低的成本和最大的控制，也许脱脂是一条路要走。如果你想要一点糖，但不要太多，并且可以忍受稍微高一点的价格以获得更好的整体体验，那么 2%的阵营就是它所在的地方。

感谢[Yoo Yoo]注意到 DigiKey 的手机计划选项！