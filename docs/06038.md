# 电动乐高火车在轨道上充电

> 原文:[https://hack aday . com/2020/03/22/motorized-Lego-train-gets-qi-charging-in-the-track/](https://hackaday.com/2020/03/22/motorized-lego-train-gets-qi-charging-in-the-track/)

和许多人一样，这个项目从一个简单的想法开始。[本·霍德]只是想让[拿一个静态的乐高玩具*霍格沃茨特快列车*工具包，并使它机动化](https://benhoad.net/2020-03-lego-hogwarts-express-iot/)。它与标准的乐高轨道块兼容，所以他所要做的就是弄清楚如何把一个马达塞进去，然后就完成了。对吗？

你已经知道这种事情是怎么发生的了。它从添加马达开始，一旦[Ben]使用一些[社区乐高 CAD 工具](https://hackaday.com/2018/09/07/fosscon-2018-where-open-source-and-lego-collide/)来找出哪些工具包有他需要的特定部件，以这样一种方式重新设计火车，他将有足够的空间来安装马达，而不会破坏它的外观，这就变得相对简单了。但是后来这个怪物出现了，他发现自己掉进了那个熟悉的兔子洞。

[![](../Images/832315b4cfb5821ed379b19702730bc5.png)](https://hackaday.com/wp-content/uploads/2020/03/qitrain_detail.jpg)

A 3D representation of the train’s internal components.

第一个问题是如何可靠地给火车供电。原来后面的车或多或少已经空了，所以那成了两个 18650 电池的家~~(项目细节说“16850”，但我们认为这只是一个错别字)~~。[Ben]不想每次都要把它拆开，所以他想知道是否有可能增加无线充电。

火车车厢底部的一个 Qi 线圈和一个特殊设计的轨道部分的一个线圈使电力流动，但让它们排成一行证明有点挑剔。因此，他在车上安装了一个霍尔效应传感器，在轨道上安装了一个强磁铁，这样火车就能知道线圈何时排成一行，并自动刹车。

所以现在他有了一辆可以自行充电的机动火车，但是他应该如何开启和关闭它呢？嗯，有了 ESP8266，他认为增加 WiFi 控制很容易。通过一点代码和 Homebridge 项目，他能够让火车看起来像是苹果 HomeKit 的智能开关。这让他可以通过智能手机启动和停止列车，并完成一个例行程序，一旦列车运行完毕，就将列车返回充电站。[Ben]说接下来的步骤是进行一些健全检查，例如如果火车在几分钟内没有通过充电站，就关闭马达；这是一个明确的信号，表明它实际上并没有移动。

现在[Ben]需要做的就是在塑料霍格沃茨学生春假回来之前[实现乐高火车自动脱钩](https://hackaday.com/2015/12/13/decoupling-lego-trains-automatically/)。