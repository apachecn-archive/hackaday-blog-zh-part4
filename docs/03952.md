# 寿司卷有助于检查你的 CPU 内部

> 原文:[https://hack aday . com/2019/08/21/sushi-roll-helps-inspect-your-CPU-internals/](https://hackaday.com/2019/08/21/sushi-roll-helps-inspect-your-cpu-internals/)

[Gamozolabs']关于[寿司卷](https://gamozolabs.github.io/metrology/2019/08/19/sushi_roll.html)——一个用于监控英特尔 CPU 内部的研究内核——的帖子相当长。虽然我们对由于“敏感特性”导致内核的源代码不完全可用感到失望，但我们对现代 x86 架构的描述和一些用寿司卷完成的工作印象深刻，所以我们不得不发布它。如果这个帖子让你想实际尝试一下，你可以看看另一个[Gamozolabs]的作品，Orange Slice。

虽然你可能知道现代的英特尔 CPU 与它所模仿的旧的 8086 处理器几乎没有相似之处，但有时意识到它已经走了多远是令人惊讶的。CPU 做的第一件事就是把你的指令分解成微操作。执行引擎使用一些复杂的技术进行寄存器重命名和调度，允许您不按顺序运行指令，并在每个时钟周期运行多条指令。

寿司卷的目的是减少时间的不确定性，以便测量可以显示短的微操作持续时间。内核不使用锁定，也不使用中断、计时器、线程或进程。这使得代码在运行时不会受到很多外部因素的影响，比如缓存驱逐或中断。结合英特尔性能监控寄存器，您可以进行一些非常具体的测量。

就像我们说的，我们很遗憾你不能得到内核源代码来做你自己的测量。然而，这份工作令人印象深刻，背景资料也是一份不错的读物。

许多这种内部琐事看起来并不重要，直到它成为安全漏洞利用的主题。我们只是不能得到足够的 [CPU 内部](https://hackaday.com/2017/12/28/34c3-hacking-into-a-cpus-microcode/)。