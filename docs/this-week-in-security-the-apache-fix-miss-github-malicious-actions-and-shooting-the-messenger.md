# 本周在安全方面:Apache 修复失误，Github(恶意)行动，并拍摄信使

> 原文：<https://hackaday.com/2021/10/15/this-week-in-security-the-apache-fix-miss-github-malicious-actions-and-shooting-the-messenger/>

Apache 2.4.50 包括对 CVE-2021-41773 的修复。后来发现[这个修复是不完整的](https://httpd.apache.org/security/vulnerabilities_24.html?incomplete)，这个版本容易受到同一漏洞的排列的攻击。2.4.51 现已推出，应该可以正确修复漏洞。

最初的漏洞利用使用`.%2e/`作为神奇的有效载荷，它使用 URL 编码将额外的点符号作为路径的一部分偷偷通过。[新的变通方法](https://twitter.com/roman_soft/status/1446252280597078024)使用`.%%32%65/`。这看起来有点奇怪，但是当你解码的时候是有意义的。URL 编码使用 UTF-8，所以`%32`解码到`2`，而`%65`解码到`e`。熟悉吗？是的，这只是第二层 URL 编码的原始漏洞。这与第一次迭代有相同的要求，在配置文件中必须启用`cgi-bin`来执行代码，并且必须禁用`require all denied`。

## 用超级 SloMo 打破 Youtube

[【Florian Mathieu】在玩 mp4 muxing](https://realkeyboardwarrior.github.io/security/2021/10/11/hacking-youtube.html) ，被音频和视频复用在一起的复杂性所震惊。他有一个 10 秒钟的视频，仅用了 8 秒钟就回放了。这很奇怪。罪魁祸首是 mp4 标题中指定的时间刻度值。与他一起工作的 muxer 忽略了这个值，导致了不正确的回放。现在，如果该值被设置为非常奇怪的值，会发生什么呢？设置一个小得多的值会导致一个 4 MB 的文件实际播放 15 个小时，动作极其缓慢。

拥有这样一份奇怪的文件，下一步的逻辑是什么？当然是上传到 YouTube。YouTube 的编码过程持续了几天，最终超时。你可能会问，这真的是一个漏洞吗？YouTube 有一个故障保险，如果文件太长，它会中止文件的处理。YT 安全团队选择不为这个 bug 支付赏金，但是将[Florian]加入了他们的安全名人堂。我还没有发现利用这个漏洞的实际攻击——即使利用了这个漏洞，也很难构建一个 DoS 攻击，来满足整个世界的流量和处理要求，同时使用并上传到 YouTube。

## Dev-0343

微软的 Office365 和 Azure 平台是追踪恶意活动的强大分析工具。在一份新的报告中，他们详细描述了一个参与者，该参与者一直在对一组目标受害者进行帐户发现和大规模密码暴力破解，这些受害者包括国防承包商、波斯湾港口运营商和中东运输提供商等群体。流行的理论是，这个演员与伊朗有关联，但细节很难确定，因为袭击都是通过 tor 进行的。很明显，伊朗当地时间早上 7:30 到晚上 8:30 之间的流量要高得多。

正常的安全预防措施在这里适用。不要使用泄露的密码，并启用双因素身份验证。微软还建议阻止来自已知匿名服务的流量——换句话说，阻止 Tor 出口节点。

## 劫持 Github 操作

差不多整整一个月前，[我们覆盖了 Github Actions](https://hackaday.com/2021/09/17/this-week-in-security-office-0-day-forcedentry-protonmail-and-omigod/#github) 中的一个缺陷，其中 pull 请求中的一个符号链接可能允许拼写检查工作流的意外行为。[嗯，还有更多](https://medium.com/cider-sec/bypassing-required-reviews-using-github-actions-6e1b29135cc7)。现在这种脆弱性既好又坏。它更难被利用，因为它仅限于具有写权限的用户帐户。但它也更普遍，因为每个组织都有默认启用的操作。

任何拥有写权限的用户也拥有创建新工作流的权限。创建工作流的过程还包括为该工作流使用的令牌设置权限。因此，任何拥有写权限的用户都有可能拥有几乎全部的权限，包括批准受保护分支上的拉请求。更糟糕的是，action bot 被视为一个独立的用户，这意味着它可以批准恶意用户发起的 pull 请求。

要点是你应该在任何不使用 Github 的地方禁用它。如果启用了操作，受保护的分支不是防弹解决方案。目前看来，这是 Github 中的一个突出问题。

## 射杀信使

最后，在一个令人难以置信的令人失望的故事中，密苏里州州长起诉了一名记者，因为他发现并负责任地披露了州网站的信息泄露。该州教育部网站的漏洞可能暴露了教师的社会安全号码。

正如你所料，不少安全专业人士公开表示支持记者。在报告发表之前，这个易受攻击的网站就被关闭了，确切的漏洞还没有被披露。对该漏洞最简单的描述是，“尽管在任何网页上都没有清晰可见或可搜索的私人信息，但该报发现教师的社会安全号码包含在相关页面的 HTML 源代码中。看起来很简单，一次查找触发了一个“SELECT *”SQL 语句，这些结果被直接编码为 JSON，嵌入在页面源代码的脚本中。

公平地说，这个故事可能还有更多。可能有一个 SQL 注入或请求操作被认为是太技术性了，没有在故事中涉及。也就是说，威胁起诉看似善意的漏洞披露是一个可怕的举动。如果有更具体的细节曝光，我们会让你知道。