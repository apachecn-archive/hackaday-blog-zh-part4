# 像在 1983 年一样从头开始构建 MS-DOS

> 原文：<https://hackaday.com/2021/12/20/building-ms-dos-from-scratch-like-its-1983/>

通过编译源代码来构建一个完整的操作系统不是胆小的人能做的事；现代的 Linux 或 BSD 发行版包含数千个包和数百万行代码，所有这些都需要按照正确的顺序进行处理，并将结果存储在适当的位置。对于除了最铁杆的 Gentoo 爱好者之外的所有人来说，获得预编译的二进制文件要容易得多，但是很明显，一定有人在某个时候运行了整个编译过程。

现代操作系统的情况同样适用于 MS-DOS 等古老的软件。几年前，当微软发布几个 DOS 版本的源代码时，许多人仔细阅读代码，寻找奇怪的注释和未记录的特性，但很少有人真正尝试编译整个软件包。但是 OS/2 博物馆的[Michal Necasek]并没有回避这个挑战，并记录了从源代码编译 DOS 2.11 的完全不简单的过程。

第一个问题是弄清楚哪个版本是可用的:尽管[计算机历史博物馆](https://computerhistory.org/blog/microsoft-ms-dos-early-source-code/)简单地将该软件包标记为“MS-DOS 2.0”，但它实际上包含了 2.0 版本的 OEM 二进制文件、2.11 版本的源代码和开发过程中遗留的一些其他东西。OEM 二进制文件大多是完成的可执行文件，但也包含一些系统组件的基本源代码，允许计算机制造商根据他们特定的硬件平台定制这些组件。

编译源代码也不简单。[Michal]决定使用修正时期的工具，并检查了大约 12 个版本的 MASM 的行为，这个汇编程序可能在 20 世纪 80 年代早期被微软使用过。事实证明，1983 年的 1.25 版本产生的代码与现有二进制文件中的目标代码最匹配，即使在那时，一些源代码也需要稍加修改才能正确构建。[Michal]的博客文章还深入探讨了微软风格和 IBM 风格 DOS 之间的细微差别，这些差别不仅仅是系统文件(MSDOS)的名称。SYS 对 IBMDOS。COM)。

这个练习的最终结果是一个修改过的 DOS 2.11 源码包，它实际上编译成了一个工作的二进制文件集，与原来的不同。尽管这不会产生任何新的代码，因为 DOS 2.11 的二进制文件早就可以使用了，但它确实提供了一个有趣的视角来审视这个时代的软件开发实践，这个时代甚至连 PC 平台的基本组件都没有完全标准化。不要忘记，即使在今天，一些人仍然喜欢开发新的 DOS 软件。